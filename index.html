<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Movies - Database</title>
    <link rel="stylesheet" href="style.css">
</head>

<body>

    <!-- icon-script-web (https://ionic.io/ionicons) -->

    <script type="module" src="https://unpkg.com/ionicons@5.5.2/dist/ionicons/ionicons.esm.js"></script>
    <script nomodule src="https://unpkg.com/ionicons@5.5.2/dist/ionicons/ionicons.js"></script>

    <header>
        <a href="#" class="logo"><span style="color:rgb(228, 137, 228)">ALL</span>MOVIE</a>
        <ul class="navigation">
            <li><a href="#">Home</a></li>
            <li><a href="#">TV Shows</a></li>
            <li><a href="#">Movies</a></li>
            <li><a href="#">Latest</a></li>
        </ul>
        <div class="search">
            <input type="text" oninput="debounce(main, 1000)" id="movie1" placeholder="Enter movie name">
            <ion-icon id="s_icon" name="search-outline"></ion-icon>
            <span id="apnd">
                <div class="dropdown" id="movies"></div>
            </span>
        </div>
    </header>

    <div id="container">
        <h1><u>Get movies - details</u></h1>
        <input type="text" id="movie" placeholder="Enter movie Name" />
        <div id="btn"><button onclick="getMovie_data()">Search</button></div>
        <div id="movie_data"></div>
        <footer style="text-align: center; margin:1%; padding:1%">
            <p>Made with &#9829; by <a style="text-decoration:none; color: rgb(29, 20, 1);"
                    href="http://www.github.com/ipankaj07">Pankaj</a></p>
        </footer>
    </div>
</body>

<script src="script.js" type="text/javascript"></script>
<script src="search.js" type="text/javascript"></script>


<!-- <script>

    // search Movies

    let movie_div = document.getElementById('movies')

    var timerId;

    async function searchMovies(movie_name) {

        try {

            let res = await fetch(`http://www.omdbapi.com/?apikey=d806bd70&s=${movie_name}`);

            let data = await res.json();

            // console.log(`data:`, data);
            return data;
        }
        catch (err) {
            console.log(`Error:`, err);
        }
    }

    // searchMovies("inception");

    function appendMovies(movies) {

        if (movies == undefined) {
            return false;
        }

        movie_div.innerHTML = null;

        movies.forEach(function (movie) {

            let img_div = document.createElement('div')
            let title_div = document.createElement('div')

            let year = document.createElement('p');
            year.innerText = movie.Year;

            let p = document.createElement('p');
            p.innerText = movie.Title + " ( " + year.innerText + " )" + "\n";


            let poster = document.createElement('img');
            poster.src = movie.Poster;

            img_div.appendChild(poster);
            title_div.appendChild(p);

            movie_div.append(img_div, title_div)
        })

    }

    // main function

    async function main() {

        let name = document.getElementById("movie1").value;

        // get search Movies


        if (name.length < 3) {

            return false;
        }

        let res = await searchMovies(name);

        let movie_data = res.Search;

        appendMovies(movie_data)

        // console.log(`res:`, res);
    }


    function debounce(func, delay) {

        // lets talk about A
        //func  = main()

        //ave -- setTimeout -- fun -- main() -- searchMovies("ave")
        //aven -- clear the prev timeout -- setTimeout -- func() -- main() -- searchMovies("aven")

        if (timerId) {
            clearTimeout(timerId);
        }

        timerId = setTimeout(function () {

            func()

        }, delay)

    }

</script> -->


</html>